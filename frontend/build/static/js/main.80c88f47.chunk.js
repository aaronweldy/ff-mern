(this["webpackJsonpff-mern"]=this["webpackJsonpff-mern"]||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},180:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(29),r=n.n(c),s=n(48),i=n(45),o=n(120),l=n(82),j=n(121),u=n.n(j),d=Object(l.b)({name:"user",initialState:{loggedIn:!1,currUser:null},reducers:{login:function(e){e.loggedIn=!0},logout:function(e){e.loggedIn=!1},setUser:function(e,t){e.currUser=t.payload}}}),h=function(e){return e.user.loggedIn},b=d.actions,O=b.login,m=b.logout,f=(b.setUser,d.reducer),p={key:"root",storage:u.a},x=Object(i.g)(p,f),g=Object(l.a)({reducer:{user:x},middleware:Object(l.c)({serializableCheck:{ignoredActions:[i.a,i.f,i.b,i.c,i.d,i.e]}})}),v=(n(144),n(145),n(28)),y=n(24),S=n(15),w=n.n(S),k=n(13),C=n(64),N=n(21),P=n(7),T=n(187),R=n(188),I=n(189),A=n(201),L=n(83),E=n(11),B=n(122),F=(n(181),n(75),{callbacks:{signInSuccessWithAuthResult:function(e){return console.log(e),!0},uiShown:function(){document.getElementById("loader").style.display="none"}},signInFlow:"popup",signInSuccessUrl:"/",signInOptions:[{provider:E.a.auth.EmailAuthProvider.PROVIDER_ID,fullLabel:"Email authentication"},E.a.auth.GoogleAuthProvider.PROVIDER_ID]});E.a.initializeApp({apiKey:"AIzaSyCXG6J4qNGuYc4P2RZM_wKAEdECO7_qaog",authDomain:"ff-mern.firebaseapp.com",projectId:"ff-mern",storageBucket:"ff-mern.appspot.com",messagingSenderId:"54859804653",appId:"1:54859804653:web:7ca0c44cce579e08da01e4",measurementId:"G-CKLBF5P572"});var W=E.a.storage(),U=E.a.auth(),D=new B.a.AuthUI(E.a.auth()),G=E.a,J=(n(50),n(1)),z=function(){var e=Object(a.useState)([]),t=Object(P.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=U.onAuthStateChanged((function(e){if(e){var t="".concat("https://orca-ff.herokuapp.com","/api/v1/user/").concat(e.uid,"/leagues/");fetch(t).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then(function(){var e=Object(N.a)(w.a.mark((function e(t){var n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t.teams),n=Object(C.a)(t.teams.entries());try{for(r=function(){var e=Object(P.a)(a.value,2),t=e[0],n=e[1];n.leagueLogo&&W.ref("logos/".concat(n.leagueLogo)).getDownloadURL().then((function(e){c((function(n){var a=Object(k.a)(n);return a[t].logoUrl=e,console.log(a),a}))}))},n.s();!(a=n.n()).done;)r()}catch(s){n.e(s)}finally{n.f()}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}}));return function(){return e()}}),[]),Object(J.jsxs)(T.a,{fluid:!0,children:[Object(J.jsx)(R.a,{className:"justify-content-center",children:Object(J.jsx)(I.a,{id:"teamCards",children:n.map((function(e,t){return Object(J.jsxs)(A.a,{className:"m-2",children:[Object(J.jsxs)(A.a.Body,{className:"d-flex flex-column align-content-end",children:[Object(J.jsx)("a",{href:"/league/".concat(e.league,"/team/").concat(e.id,"/"),children:Object(J.jsx)(A.a.Img,{variant:"bottom",className:"mt-auto",src:e.logoUrl?e.logoUrl:e.logo})}),Object(J.jsxs)("div",{className:"mt-auto",children:[Object(J.jsx)(A.a.Title,{children:e.name}),Object(J.jsx)(A.a.Text,{children:e.leagueName}),Object(J.jsx)(L.a,{className:"mt-auto",href:"/league/".concat(e.league,"/"),children:"Go to league"})]})]}),e.isCommissioner?Object(J.jsx)(A.a.Footer,{children:"Commissioner"}):""]},t)}))})}),Object(J.jsxs)(R.a,{className:"justify-content-center",children:[Object(J.jsx)(L.a,{className:"m-3",href:"/league/join/",size:"lg",children:"Join a league"}),Object(J.jsx)(L.a,{className:"m-3",variant:"primary",size:"lg",href:"/league/create/",children:"Create a league"})]})]})},_=n(16),H=n(126),q=n(192),K=n(193),Q=n(190),V=n(191),Y=n(74),M=n(203);function X(e){var t=e.players,n=e.oppPlayers,a=e.name,c=e.week,r=e.isOwner;return Object(J.jsxs)(Q.a,{striped:!0,bordered:!0,hover:!0,children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{children:[r?Object(J.jsx)("th",{children:"Move"}):null,Object(J.jsx)("th",{children:"Position"}),Object(J.jsx)("th",{children:"Player Name"}),r&&"starters"===a?Object(J.jsx)("th",{children:"Backup"}):null]})}),Object(J.jsx)("tbody",{children:t.map((function(t,s){var i;return Object(J.jsxs)("tr",{children:[r?Object(J.jsx)("td",{children:Object(J.jsxs)(V.a,{name:"position",title:"",children:[n.filter((function(e){return e.lineup[c].indexOf(t.position)>=0||t.lineup[c].indexOf(e.position)>=0})).map((function(r,s){var i=n.findIndex((function(e){return e.name===r.name&&e.position===r.position}));return Object(J.jsxs)(Y.a.Item,{onClick:function(){return e.handlePlayerChange(t,a,n[i])},children:[r.lineup[c],":",r.name]},s)})),"starters"===a&&""!==t.name?Object(J.jsx)(Y.a.Item,{onClick:function(){return e.handleBenchPlayer(t,s)},children:"bench"}):null]})}):null,Object(J.jsx)("td",{children:Object(J.jsx)("span",{children:"starters"===a?t.lineup[c]:t.position})}),Object(J.jsx)("td",{children:Object(J.jsx)("span",{children:t.name})}),r&&"starters"===a?Object(J.jsx)("td",{children:Object(J.jsxs)(M.a,{name:"backup",title:t.backup&&null!==(i=t.backup[c])&&void 0!==i?i:"None",variant:"secondary",children:[n.filter((function(e){return e.lineup[c].indexOf(t.position)>=0||t.lineup[c].indexOf(e.position)>=0})).map((function(a,c){var r=n.findIndex((function(e){return e.name===a.name&&e.position===a.position}));return Object(J.jsx)(Y.a.Item,{onClick:function(){return e.handlePlayerChange(t,"backup",n[r])},children:a.name},c)})),Object(J.jsx)(Y.a.Item,{onClick:function(){return e.handlePlayerChange(t,"backup",{name:"none"})},children:"None"})]})}):null]},s)}))})]})}function Z(e){return Object(J.jsx)(L.a,{className:"left-corner",href:"/league/".concat(e.id,"/"),variant:"primary",children:"Back to league home"})}var $=n(196),ee=n(125),te=n(197),ne=n(71),ae=function(e){var t=Object(a.useState)(null),n=Object(P.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(e.name),i=Object(P.a)(s,2),o=i[0],l=i[1];Object(a.useEffect)((function(){l(e.name),W.ref().child("".concat(e.id,"/logo")).getDownloadURL().then((function(e){return r(e)}))}),[e]);var j=Object(a.useCallback)((function(e){var t=new FileReader;t.onload=function(e){r(e.target.result)},t.readAsDataURL(e[0])}),[]),u=Object(ne.a)({onDrop:j}),d=u.getRootProps,h=u.getInputProps;return Object(J.jsxs)($.a,{show:e.showImage,onHide:e.handleHide,children:[Object(J.jsx)($.a.Header,{children:Object(J.jsx)($.a.Title,{children:"Set Team Info"})}),Object(J.jsxs)(ee.a,{children:[o&&Object(J.jsx)(R.a,{children:Object(J.jsxs)(H.a,{children:[Object(J.jsx)(te.a.Label,{children:"Team Name"}),Object(J.jsx)(te.a.Control,{type:"text",placeholder:"Set Team Name",value:o,onChange:function(e){return l(e.target.value)}})]})}),Object(J.jsx)(R.a,{className:"mb-3 mt-3",children:Object(J.jsxs)(H.a,{children:[Object(J.jsx)(te.a.Label,{children:"Team Logo"}),Object(J.jsxs)("div",Object(_.a)(Object(_.a)({},d({className:"dropzone"})),{},{children:[Object(J.jsx)("input",Object(_.a)({},h())),"Select or drop image here"]}))]})}),Object(J.jsx)(R.a,{className:"justify-content-center",children:Object(J.jsx)(q.a,{className:"image-fit",src:c})})]}),Object(J.jsx)($.a.Footer,{className:"d-flex justify-content-start",children:Object(J.jsx)(L.a,{variant:"success",onClick:function(){return e.handleInfoSubmission(c,o)},children:"Submit Info"})})]})},ce=function(e){var t=e.week,n=e.maxWeeks,a=e.onChange;return Object(J.jsxs)(R.a,{className:"mt-3 mb-3 align-items-center",children:[Object(J.jsx)(H.a,{sm:"auto",children:Object(J.jsx)(te.a.Label,{children:"Week:"})}),Object(J.jsx)(H.a,{sm:"auto",children:Object(J.jsx)(te.a.Control,{as:"select",value:t,onChange:a,children:Object(k.a)(Array(n||18)).map((function(e,t){return Object(J.jsx)("option",{value:t+1,children:t+1},t)}))})})]})},re={QB:1,RB:2,WR:3,TE:4,K:5,"WR/RB":6,"WR/RB/TE":7,"QB/WR/RB/TE":8},se=["QB","RB","WR","TE","K","WR/RB","WR/RB/TE","QB/WR/RB/TE"],ie=function(e,t){return re[e]-re[t]},oe=function(e){var t=Object(a.useState)(null),n=Object(P.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)([]),i=Object(P.a)(s,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){var t=U.onAuthStateChanged(function(){var t=Object(N.a)(w.a.mark((function t(n){var a,c,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=10;break}return a="".concat("https://orca-ff.herokuapp.com","/api/v1/league/").concat(e,"/"),t.next=4,fetch(a);case 4:return c=t.sent,t.next=7,c.json();case 7:s=t.sent,r(s.league),l(s.teams);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return t()}}),[e]),{league:c,teams:o}},le=function(){var e=Object(y.g)(),t=e.id,n=e.leagueId,c=oe(n).league,r=Object(a.useState)(null),s=Object(P.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(!1),j=Object(P.a)(l,2),u=j[0],d=j[1],h=Object(a.useState)(!1),b=Object(P.a)(h,2),O=b[0],m=b[1],f=Object(a.useState)(1),p=Object(P.a)(f,2),x=p[0],g=p[1],v=Object(a.useState)(!1),S=Object(P.a)(v,2),C=S[0],I=S[1];Object(a.useEffect)((function(){var e="".concat("https://orca-ff.herokuapp.com","/api/v1/league/").concat(n,"/team/").concat(t,"/"),a=U.onAuthStateChanged(function(){var t=Object(N.a)(w.a.mark((function t(n){var a,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}return t.next=3,fetch(e);case 3:return a=t.sent,t.next=6,a.json();case 6:c=t.sent,o(c.team),I(c.team.owner===n.uid);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return a()}}),[x,c,n,t]),Object(a.useEffect)((function(){c&&g(c.lastScoredWeek+1||1)}),[c]);var A=function(e,t,n){"starters"===t?(n.lineup[x]=e.lineup[x],e.lineup[x]="bench"):"backup"===t?"none"===n.name?e.backup[x]=null:e.backup[x]=n.name:(e.lineup[x]=n.lineup[x],""!==n.name&&(n.lineup[x]="bench")),o(Object(_.a)({},i))},E=function(e){e.lineup[x]="bench",o(Object(_.a)({},i))},B=[],F=[];return i&&c&&c.lineupSettings&&(B=Object.keys(c.lineupSettings).sort(ie).map((function(e){return Object(k.a)(Array(parseInt(c.lineupSettings[e])).fill().map((function(){return{position:e,name:"",lineup:Object(k.a)(Array(c.numWeeks).fill(e))}})))})).flat(),i.players.filter((function(e){return"bench"!==e.lineup[x]})).forEach((function(e){B[B.findIndex((function(t){return t.lineup[x]===e.lineup[x]&&""===t.name}))]=e})),F=i.players.filter((function(e){return"bench"===e.lineup[x]}))),Object(J.jsxs)(T.a,{children:[Object(J.jsx)(ae,{showImage:O,name:i&&i.name,id:i&&i.id,handleHide:function(){return m(!O)},handleInfoSubmission:function(e,n){var a="".concat("https://orca-ff.herokuapp.com","/api/v1/league/updateTeamInfo/"),c={id:t,url:e,name:n},r={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c)};e!==i.logo&&"/orca.jfif"!==e?W.ref().child("".concat(i.id,"/logo")).putString(e,"data_url").then((function(e){e.ref.getDownloadURL().then((function(e){m(!1),c.url=e,r=Object(_.a)(Object(_.a)({},r),{},{body:JSON.stringify(c)}),fetch(a,r).then((function(e){return e.json()})).then((function(e){o(e.team)})).catch((function(e){return console.log(e)}))}))})):(m(!1),fetch(a,r).then((function(e){return e.json()})).then((function(e){o(e.team)})).catch((function(e){return console.log(e)})))}}),Object(J.jsx)(R.a,{children:Object(J.jsx)(Z,{id:n})}),i?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(R.a,{className:"mt-3 mb-3",children:[Object(J.jsx)(H.a,{sm:"auto",children:Object(J.jsx)(q.a,{className:"image-fit-height",src:i.logo||"/orca.jfif"})}),Object(J.jsx)(H.a,{sm:"auto",children:Object(J.jsxs)("h1",{className:"mt-2",children:[i.name,Object(J.jsx)("div",{className:"subtitle mb-3 mt-2",children:i.ownerName})]})}),C?Object(J.jsx)(H.a,{className:"mt-3",children:Object(J.jsx)(L.a,{onClick:function(){return m(!0)},children:"Change/Set Team Logo"})}):null]}),Object(J.jsx)(ce,{week:x,maxWeeks:c&&c.numWeeks,onChange:function(e){return g(parseInt(e.target.value))}}),Object(J.jsx)(R.a,{children:Object(J.jsx)("h3",{children:"Starters"})}),Object(J.jsx)(R.a,{children:Object(J.jsx)(X,{isOwner:C,players:B,oppPlayers:F,week:x,name:"starters",handleBenchPlayer:E,handlePlayerChange:A})}),Object(J.jsx)(R.a,{children:Object(J.jsx)("h3",{children:"Bench"})}),Object(J.jsx)(R.a,{children:Object(J.jsx)(X,{isOwner:C,players:F,oppPlayers:B,week:x,name:"bench",handleBenchPlayer:E,handlePlayerChange:A})}),Object(J.jsx)(R.a,{children:Object(J.jsx)(L.a,{className:"mb-3 mt-2",variant:"success",onClick:function(){var e="".concat("https://orca-ff.herokuapp.com","/api/v1/league/updateTeams/"),t={teams:[i],week:x},n={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)};fetch(e,n).then((function(e){return e.json()})).then((function(){d(!0),setTimeout((function(){return d(!1)}),8e3)}))},children:"Submit Lineup"})}),u?Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{sm:"auto",children:Object(J.jsx)(K.a,{variant:"success",children:"Submitted lineup!"})})}):""]}):""]})},je=n(198);function ue(){return Object(J.jsx)(je.a.Collapse,{className:"justify-content-end",children:Object(J.jsx)(L.a,{variant:"primary",href:"/login/",children:"Login or Create Account"})})}function de(){var e=Object(s.b)(),t=Object(a.useState)(""),n=Object(P.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),o=Object(P.a)(i,2),l=o[0],j=o[1],u=U.currentUser;return Object(a.useEffect)((function(){var e=U.onAuthStateChanged((function(e){e?r(e.email):j(!0)}));return function(){return e()}}),[u]),l?Object(J.jsx)(y.a,{to:"/login/"}):Object(J.jsxs)(je.a.Collapse,{className:"justify-content-end",children:[Object(J.jsxs)(je.a.Text,{className:"mr-3",children:["Welcome",u?Object(J.jsxs)("a",{href:"/user/".concat(u.uid,"/"),children:[" ",c,"!"]}):"!"]}),u&&u.photoURL?Object(J.jsx)("img",{src:u.photoURL,className:"d-inline-block align-top mr-3",width:"auto",height:"35",alt:"User logo"}):"",Object(J.jsx)(L.a,{variant:"primary",onClick:function(){U.signOut().then((function(){e(m()),j(!0)})).catch((function(e){return console.log(e)}))},type:"submit",children:"Logout"})]})}var he=function(){var e=Object(s.c)(h)?Object(J.jsx)(de,{}):Object(J.jsx)(ue,{});return Object(J.jsxs)(je.a,{bg:"dark",expand:"lg",variant:"dark",children:[Object(J.jsxs)(je.a.Brand,{href:"/",children:[Object(J.jsx)("img",{src:"".concat("/orca.jfif"),className:"d-inline-block align-top mr-2",width:"auto",height:"35",alt:"League logo"}),"Orca Fantasy"]}),e]})},be=function(){var e=Object(s.b)();return Object(a.useEffect)((function(){D.start("#firebaseui-auth-container",F);var t=U.onAuthStateChanged((function(t){t?e(O()):console.log(t)}));return function(){return t()}}),[e]),Object(J.jsxs)(T.a,{children:[Object(J.jsx)(R.a,{className:"justify-content-center mt-3",children:Object(J.jsx)("h1",{children:"Login/Signup"})}),Object(J.jsxs)(R.a,{className:"justify-content-center mt-3 mb-3",children:[Object(J.jsx)("div",{className:"subtitle",children:"Use the buttons below to authenticate. If you don't have an account, follow the steps as a sign-in process."}),Object(J.jsx)("div",{className:"subtitle",children:"If creating a new account, password must be at least six characters."})]}),Object(J.jsx)("div",{id:"firebaseui-auth-container"}),Object(J.jsx)("div",{id:"loader",children:"Loading..."})]})},Oe=n(199),me=function(e){var t=e.handleChange,n=e.positionSettings;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("h4",{children:"Lineup Settings"}),se.map((function(e,a){return Object(J.jsxs)(te.a.Group,{as:R.a,md:6,children:[Object(J.jsx)(H.a,{children:Object(J.jsxs)(te.a.Label,{md:2,children:[e,":"]})}),Object(J.jsx)(H.a,{md:1,children:Object(J.jsx)(te.a.Control,{"data-id":a,name:e,onChange:t,value:n[e]||0,size:"md",type:"text"})})]},a)}))]})},fe=n(202),pe=function(e){var t=e.teams,n=e.handleChange,a=e.handleOverlay;return console.log(t),Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsxs)(Q.a,{striped:!0,bordered:!0,hover:!0,children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{children:"Team Name"}),Object(J.jsx)("th",{children:"Team Owner Email"}),Object(J.jsx)("th",{children:"Commissioner"})]})}),Object(J.jsx)("tbody",{children:t.map((function(e,t){return Object(J.jsx)(fe.a,{placement:"left",delay:"1000",overlay:Object(J.jsx)(L.a,{onClick:function(){return a(t)},name:"remove",variant:"danger",children:"X"}),children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:Object(J.jsx)("input",{name:"name","data-id":t,type:"text",value:e.name,onChange:n})}),Object(J.jsx)("td",{children:Object(J.jsx)("input",{name:"ownerName","data-id":t,type:"text",value:e.ownerName,onChange:n})}),Object(J.jsx)("td",{children:Object(J.jsx)(te.a.Check,{"data-id":t,name:"isCommissioner",onChange:n,checked:e.isCommissioner})})]},t)},t)}))})]})})})},xe=function(e){var t=e.leagueName,n=e.setLeagueName,a=e.handleSizeChange,c=e.numTeams,r=e.numWeeks,s=e.handleTeamSizeChanges;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(R.a,{className:"align-items-center mt-5",children:[Object(J.jsx)(H.a,{sm:"auto",children:Object(J.jsx)(te.a.Label,{children:"League Name:"})}),Object(J.jsx)(H.a,{sm:6,children:Object(J.jsx)(te.a.Control,{placeholder:"My Fantasy League",defaultValue:t,onChange:function(e){return n(e.target.value)}})})]}),s&&Object(J.jsxs)(R.a,{className:"align-items-center",children:[Object(J.jsx)(H.a,{children:Object(J.jsx)(te.a.Label,{children:"Select number of teams:"})}),Object(J.jsx)(H.a,{children:Object(J.jsx)(V.a,{variant:"primary",className:"m-3",name:"teams",title:c,defaultValue:c||0,onSelect:function(e){return a(e,"teams")},children:Object(k.a)(Array(15)).map((function(e,t){return Object(J.jsx)(Y.a.Item,{eventKey:t,children:t},t)}))})})]}),Object(J.jsxs)(R.a,{className:"align-items-center",children:[Object(J.jsx)(H.a,{children:Object(J.jsx)(te.a.Label,{children:"Number of weeks in season:"})}),Object(J.jsx)(H.a,{children:Object(J.jsx)(V.a,{variant:"primary",className:"m-3",name:"weeks",title:r,defaultValue:r||0,onSelect:function(e){return a(e,"weeks")},children:Object(k.a)(Array(18)).map((function(e,t){return Object(J.jsx)(Y.a.Item,{eventKey:t+1,children:t+1},t)}))})})]})]})},ge=function(e){var t=e.handleClick,n=e.scoring;return Object(J.jsxs)(te.a.Group,{children:[Object(J.jsx)(te.a.Check,{type:"radio",name:"scoring-setting",value:"Standard",label:"Standard",onClick:function(e){return t(e.target.value)},defaultChecked:"Standard"===n}),Object(J.jsx)(te.a.Check,{type:"radio",name:"scoring-setting",value:"PPR",label:"PPR",onClick:function(e){return t(e.target.value)},defaultChecked:"PPR"===n}),Object(J.jsx)(te.a.Check,{type:"radio",name:"scoring-setting",value:"Custom",label:"Custom",onClick:function(e){return t(e.target.value)},defaultChecked:"Custom"===n})]})};var ve=function(){var e=Object(a.useState)(0),t=Object(P.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),s=Object(P.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(!1),j=Object(P.a)(l,2),u=j[0],d=j[1],h=Object(a.useState)(!1),b=Object(P.a)(h,2),O=b[0],m=b[1],f=Object(a.useState)(!1),p=Object(P.a)(f,2),x=p[0],g=p[1],v=Object(a.useState)(!1),S=Object(P.a)(v,2),C=S[0],I=S[1],A=Object(a.useState)(""),E=Object(P.a)(A,2),B=E[0],F=E[1],U=Object(a.useState)({}),D=Object(P.a)(U,2),G=D[0],z=D[1],H=Object(a.useState)(0),K=Object(P.a)(H,2),Q=K[0],V=K[1],Y=Object(a.useState)(0),M=Object(P.a)(Y,2),X=M[0],Z=M[1],$=Object(a.useState)("Standard"),ee=Object(P.a)($,2),ae=ee[0],ce=ee[1],re=Object(a.useState)("".concat("/orca.jfif")),se=Object(P.a)(re,2),ie=se[0],oe=se[1],le=Object(a.useCallback)((function(e){var t=new FileReader;t.onload=function(e){oe(e.target.result)},t.readAsDataURL(e[0])}),[]),je=Object(ne.a)({onDrop:le}),ue=je.getRootProps,de=je.getInputProps;function he(){return(he=Object(N.a)(w.a.mark((function e(){var t,n,a,c,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(!0),t=Object(Oe.a)(),n=W.ref().child("logos/".concat(t)),"/orca.jfif"===ie){e.next=7;break}n.putString(ie,"data_url").then(Object(N.a)(w.a.mark((function e(){var n,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={league:B,teams:i,logo:t,posInfo:G,scoring:ae,numWeeks:X},e.next=3,fetch("".concat("https://orca-ff.herokuapp.com","/api/v1/league/create/"),{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,V(c.id),g(!0),I(!1);case 10:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e)})),e.next=17;break;case 7:return a={league:B,teams:i,logo:"/orca.jfif",posInfo:G,scoring:ae,numWeeks:X},e.next=10,fetch("".concat("https://orca-ff.herokuapp.com","/api/v1/league/create/"),{method:"POST",body:JSON.stringify(a),headers:{"content-type":"application/json"}});case 10:return c=e.sent,e.next=13,c.json();case 13:r=e.sent,V(r.id),g(!0),I(!1);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(x)return Object(J.jsx)(y.a,{to:"/league/".concat(Q,"/")});var be=O?Object(J.jsx)(L.a,{variant:"primary",onClick:function(){return he.apply(this,arguments)},children:">>"}):Object(J.jsx)(L.a,{variant:"primary",onClick:function(){return u?m(!0):d(!0)},children:">>"});return Object(J.jsxs)(T.a,{children:[Object(J.jsx)(xe,{handleSizeChange:function(e,t){switch(t){case"teams":c(parseInt(e)),o(Array(parseInt(e)).fill().map((function(e,t){return{name:"Team ".concat(t),teamOwner:"",isCommissioner:!1}})));break;case"weeks":Z(parseInt(e));break;default:Z(parseInt(e))}},setLeagueName:F,numTeams:n,numWeeks:X,handleTeamSizeChanges:!0}),u?Object(J.jsx)(pe,{teams:i,handleChange:function(e){var t=Object(k.a)(i);"isCommissioner"===e.target.name?t[e.target.dataset.id][e.target.name]=!t[e.target.dataset.id][e.target.name]:t[e.target.dataset.id][e.target.name]=e.target.value,o(t)}}):"",O?Object(J.jsxs)(te.a,{children:[Object(J.jsx)(me,{handleChange:function(e){var t=Object(_.a)({},G);t[e.target.name]=e.target.value,z(t)},positionSettings:G}),Object(J.jsx)("hr",{}),Object(J.jsx)("h4",{children:"Scoring Settings"}),Object(J.jsx)(ge,{handleClick:ce,scoring:ae}),Object(J.jsx)("h4",{children:"League Logo"}),Object(J.jsx)(R.a,{className:"mb-3",children:Object(J.jsxs)("div",Object(_.a)(Object(_.a)({},ue({className:"dropzone"})),{},{children:[Object(J.jsx)("input",Object(_.a)({},de())),"Select or drop image here"]}))}),Object(J.jsx)(R.a,{children:Object(J.jsx)(q.a,{className:"image-fit",src:ie})})]}):"",Object(J.jsx)(te.a.Row,{className:"mb-3 mt-3",children:be}),C?Object(J.jsx)("div",{className:"spinning-loader"}):""]})},ye=n(194);var Se=function(){var e=Object(y.g)().id,t=oe(e),n=t.league,c=t.teams,r=Object(a.useState)([]),s=Object(P.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(!1),j=Object(P.a)(l,2),u=j[0],d=j[1],h=Object(a.useState)(!1),b=Object(P.a)(h,2),O=b[0],m=b[1],f=Object(a.useState)(!1),p=Object(P.a)(f,2),x=p[0],g=p[1],v=Object(a.useState)(null),S=Object(P.a)(v,2),C=S[0],I=S[1],A=Object(a.useState)(null),E=Object(P.a)(A,2),B=E[0],F=E[1],D=U.currentUser;return console.log(n),Object(a.useEffect)((function(){var e=U.onAuthStateChanged(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&n&&(a=c.sort((function(e,t){var n=function(e,t){return t?e+t:e+0};return t.weekScores.reduce(n,0)+t.addedPoints.reduce(n,0)-(e.weekScores.reduce(n,0)+e.addedPoints.reduce(n,0))})),o(a),"/orca.jfif"!==n.logo?W.ref("logos/".concat(n.logo)).getDownloadURL().then((function(e){F(e)})):F(n.logo));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[e,D,n,c]),u?Object(J.jsx)(y.a,{to:"/league/".concat(e,"/runScores/")}):x?Object(J.jsx)(y.a,{to:"/"}):Object(J.jsxs)(T.a,{children:[Object(J.jsxs)($.a,{show:O,onHide:function(){return m(!1)},children:[Object(J.jsx)($.a.Header,{closeButton:!0,children:Object(J.jsx)($.a.Title,{children:"Delete League"})}),Object(J.jsxs)($.a.Body,{children:["Type the name of the league to confirm deletion:",Object(J.jsx)(te.a.Group,{className:"mt-3",as:R.a,children:Object(J.jsx)(H.a,{md:6,children:Object(J.jsx)(te.a.Control,{type:"text",onChange:function(e){return I(e.target.value)}})})})]}),Object(J.jsxs)($.a.Footer,{children:[Object(J.jsx)(L.a,{variant:"secondary",onClick:function(){return m(!1)},children:"Close"}),Object(J.jsx)(L.a,{disabled:C!==(n&&n.name),variant:"danger",onClick:function(){var t="".concat("https://orca-ff.herokuapp.com","/api/v1/league/").concat(e,"/delete/"),n={user:D?D.uid:0},a={headers:{"content-type":"application/json"},method:"POST",body:JSON.stringify(n)};fetch(t,a).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(){g(!0)})).catch((function(e){console.log(e)}))},children:"Confirm Deletion"})]})]}),Object(J.jsxs)(R.a,{className:"mb-3 mt-3 justify-content-center align-items-center",children:[B?Object(J.jsx)(q.a,{className:"image-fit-height",src:B,rounded:!0}):"",Object(J.jsx)(H.a,{sm:"auto",children:Object(J.jsx)("h1",{children:n&&n.name})})]}),Object(J.jsx)(R.a,{className:"mb-3 mt-3 justify-content-center",children:D&&n&&n.commissioners.includes(D.uid)?Object(J.jsxs)("div",{children:[Object(J.jsx)("a",{href:"/league/".concat(e,"/editTeams/"),children:"Edit Teams"})," |"," ",Object(J.jsx)("a",{href:"/league/".concat(e,"/editScoringSettings/"),children:" Edit Scoring"})," |"," ",Object(J.jsx)("a",{href:"/league/".concat(e,"/addPoints/"),children:" Adjust Weekly Scores"})," |",Object(J.jsxs)("a",{href:"/league/".concat(e,"/adjustLineups/"),children:[" ","Adjust Starting Lineups"]})," ","| ",Object(J.jsx)("a",{href:"/league/".concat(e,"/updateSettings/"),children:"Adjust Settings"})," |"," ",Object(J.jsxs)(L.a,{className:"ml-1 mb-1",id:"inline-button",variant:"link",onClick:function(){return m(!0)},children:[" ","Delete League"]})]}):""}),Object(J.jsx)(R.a,{className:"mb-3 mt-3 justify-content-center",children:Object(J.jsxs)(Q.a,{striped:!0,hover:!0,className:"hide-cells",children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{}),Object(J.jsx)("th",{children:"Team Name"}),Object(J.jsx)("th",{children:"Team Owner"}),Object(k.a)(Array(17).fill().map((function(e,t){return Object(J.jsx)("th",{children:t+1},t)}))),Object(J.jsx)("th",{children:"Total Points"})]})}),Object(J.jsx)("tbody",{children:i.map((function(t,a){var c="default"!==t.ownerName?Object(J.jsx)("a",{href:"/user/".concat(t.owner,"/"),children:t.ownerName}):t.ownerName;return Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:Object(J.jsx)(q.a,{className:"thumbnail-image",src:t.logo||"/orca.jfif"})}),Object(J.jsx)("td",{children:Object(J.jsx)("a",{href:"/league/".concat(e,"/team/").concat(t.id,"/"),children:t.name})}),Object(J.jsx)("td",{children:n&&n.commissioners.includes(t.owner)?Object(J.jsx)(fe.a,{position:"top",overlay:Object(J.jsx)(ye.a,{children:"Commissioner"}),children:Object(J.jsx)("span",{children:Object(J.jsx)("b",{children:c})})}):Object(J.jsx)("span",{children:c})}),Object(k.a)(Array(17).fill().map((function(e,n){return Object(J.jsx)("td",{children:t.weekScores[n+1]?(t.weekScores[n+1]+(t.addedPoints[n+1]||0)).toFixed(2):0},n)}))),Object(J.jsx)("td",{children:(t.weekScores.reduce((function(e,t){return e+t}),0)+t.addedPoints.reduce((function(e,t){return e+t}),0)).toFixed(2)})]},a)}))})]})}),Object(J.jsx)(R.a,{className:"justify-content-center",children:D&&n&&n.commissioners.includes(D.uid)?Object(J.jsx)(L.a,{className:"mt-3 mb-3",variant:"primary",onClick:function(){return d(!0)},children:"Run Scores"}):Object(J.jsx)(L.a,{className:"mt-3 mb-3",variant:"primary",onClick:function(){return d(!0)},children:"View Weekly Scoring Breakdown"})})]})},we=n(130),ke=(n(178),function(){var e=Object(a.useState)(null),t=Object(P.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(P.a)(r,2),i=s[0],o=s[1],l=Object(y.g)().id,j=function(){var e=Object(a.useState)([]),t=Object(P.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=U.onAuthStateChanged(function(){var e=Object(N.a)(w.a.mark((function e(t){var n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return n="".concat("https://orca-ff.herokuapp.com","/api/v1/league/allPlayers/"),e.next=4,fetch(n);case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,c(r.players.players);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]),n}();Object(a.useEffect)((function(){var e=U.onAuthStateChanged(function(){var e=Object(N.a)(w.a.mark((function e(t){var n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return n="".concat("https://orca-ff.herokuapp.com","/api/v1/league/").concat(l,"/"),e.next=4,fetch(n);case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,r.league.commissioners.includes(t.uid)||o(!0),c(r.teams);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[l]);var u=function(e){var t=Object(k.a)(n);t[e.target.dataset.id].players.push({name:"",position:"QB",lineup:Object(k.a)(Array(18).fill("bench")),points:Object(k.a)(Array(18).fill(0)),weekStats:Object(k.a)(Array(18).fill(0)),backup:Object(k.a)(Array(18).fill("None"))}),c(t)},d=function(e){var t=Object(k.a)(n);"remove"===e.target.name?t[e.target.dataset.team].players.splice(e.target.dataset.id,1):t[e.target.dataset.team].players[e.target.dataset.id][e.target.name]=e.target.value,c(t)},h=function(e){var t=Object(k.a)(n);t[e.target.dataset.id][e.target.name]=e.target.value,c(t)};return i?Object(J.jsx)(y.a,{to:"/league/".concat(l,"/")}):Object(J.jsxs)(T.a,{fluid:!0,children:[Object(J.jsx)(R.a,{className:"justify-content-center",children:Object(J.jsx)(Z,{id:l})}),Object(J.jsx)(R.a,{className:"justify-content-center",children:n?n.map((function(e,t){return Object(J.jsxs)(H.a,{md:4,className:"bordered-row m-3 p-3",children:[Object(J.jsxs)(te.a.Group,{as:R.a,className:"mt-3",children:[Object(J.jsx)(te.a.Label,{column:!0,md:4,children:"Team Name"}),Object(J.jsx)(H.a,{md:8,children:Object(J.jsx)(te.a.Control,{"data-id":t,name:"name",onChange:h,size:"lg",type:"text",value:e.name})})]}),Object(J.jsxs)(R.a,{className:"mb-2",children:[Object(J.jsx)(te.a.Label,{column:!0,md:4,children:"Team Owner"}),Object(J.jsx)(H.a,{md:8,children:Object(J.jsx)(te.a.Control,{"data-id":t,name:"ownerName",onChange:h,size:"md",type:"text",value:e.ownerName})})]}),Object(J.jsxs)(Q.a,{striped:!0,bordered:!0,hover:!0,children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{children:"Position"}),Object(J.jsx)("th",{children:"Player Name"})]})}),Object(J.jsx)("tbody",{children:e.players.map((function(e,a){return Object(J.jsx)(fe.a,{placement:"left",delay:"1000",overlay:Object(J.jsx)(L.a,{onClick:d,name:"remove",variant:"danger","data-team":t,"data-id":a,children:"X"}),children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:Object(J.jsxs)(te.a.Control,{name:"position","data-team":t,"data-id":a,as:"select",value:e.position,onChange:d,children:[Object(J.jsx)("option",{value:"QB",children:"QB"}),Object(J.jsx)("option",{value:"RB",children:"RB"}),Object(J.jsx)("option",{value:"WR",children:"WR"}),Object(J.jsx)("option",{value:"TE",children:"TE"}),Object(J.jsx)("option",{value:"K",children:"K"})]})}),Object(J.jsx)("td",{children:Object(J.jsx)(we.a,{type:"text",id:"player-typeahead",selected:e.name?[e.name]:[],options:j||[],placeholder:"Select Player",onChange:function(e){return function(e,t,a){var r=Object(k.a)(n);r[e].players[t].name=a,c(r)}(t,a,e[0])}})})]})},a)}))})]}),Object(J.jsx)(R.a,{className:"justify-content-center mb-2",children:Object(J.jsx)(L.a,{"data-id":t,onClick:u,variant:"primary",children:"Add Player"})})]},t)})):""}),Object(J.jsx)(R.a,{className:"justify-content-center m-5",children:Object(J.jsx)(L.a,{onClick:function(){var e="".concat("https://orca-ff.herokuapp.com","/api/v1/league/updateTeams/"),t={teams:n},a={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)};fetch(e,a).then((function(){return o(!0)}))},variant:"success",children:"Submit Teams"})})]})}),Ce=n(200),Ne=["first-background","second-background","third-background"],Pe=function(e){var t=e.teams,n=e.week;return Object(J.jsxs)(Q.a,{striped:!0,bordered:!0,hover:!0,className:"table-width",children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{children:"Place"}),Object(J.jsx)("th",{children:"Team Name"}),Object(J.jsx)("th",{children:"Points"})]})}),Object(J.jsx)("tbody",{children:t.sort((function(e,t){return t.weekScores[n]+(t.addedPoints[n]||0)-(e.weekScores[n]+(e.addedPoints[n]||0))})).map((function(e,t){return Object(J.jsxs)("tr",{id:t<=2?Ne[t]:"",children:[Object(J.jsx)("td",{children:t+1}),Object(J.jsx)("td",{children:e.name}),Object(J.jsx)("td",{children:((e.weekScores[n]||0)+(e.addedPoints[n]||0)).toFixed(2)})]},t)}))})]})},Te=function(e){var t=e.league,n=e.team,a=e.week;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(R.a,{className:"mb-3 align-items-center",children:[Object(J.jsx)(H.a,{sm:"auto",children:Object(J.jsx)(q.a,{className:"image-fit-height",src:n.logo||"/orca.jfif"})}),Object(J.jsxs)(H.a,{sm:"auto",className:"align-items-center",children:[Object(J.jsx)("h3",{children:n.name}),Object(J.jsx)("div",{className:"subtitle",children:n.ownerName})]})]}),Object(J.jsx)(R.a,{children:Object(J.jsxs)(Q.a,{striped:!0,bordered:!0,hover:!0,className:"table-width",children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{children:"Lineup"}),Object(J.jsx)("th",{children:"Position"}),Object(J.jsx)("th",{children:"Player Name"}),Object(J.jsx)("th",{children:"Points"}),t?t.map((function(e,t){var n=e.category;return Object(J.jsxs)("th",{children:[n.qualifier," ","between"===n.qualifier?"".concat(n.threshold_1,"/").concat(n.threshold_2):n.threshold," ",n.statType]},t)})):null]})}),Object(J.jsxs)("tbody",{children:[n.players.filter((function(e){return"bench"!==e.lineup[a]})).map((function(e,n){var c=e.error?Object(J.jsx)(fe.a,{placement:"top",overlay:Object(J.jsx)(ye.a,{id:"tooltip-top",children:"Player not found in database. Make sure the name is spelled correctly."}),children:Object(J.jsx)("td",{className:"error-background",children:Object(J.jsx)("span",{children:e.name})})},n):Object(J.jsx)("td",{children:Object(J.jsx)("span",{children:e.name})});return Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:Object(J.jsx)("span",{children:e.lineup[a]})}),Object(J.jsx)("td",{children:Object(J.jsx)("span",{children:e.position})}),c,Object(J.jsx)("td",{children:Object(J.jsx)("span",{children:e.points[a]||0})}),t?t.map((function(t,n){var c=t.category,r="between"===c.qualifier?"".concat(c.qualifier,"|").concat(c.threshold_1).concat(c.threshold_2,"|").concat(c.statType):"".concat(c.qualifier,"|").concat(c.threshold,"|").concat(c.statType);return Object(J.jsx)("td",{children:e.weekStats[a]&&e.weekStats[a][r]||0},n)})):null]},n)})),Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{colSpan:"3",children:Object(J.jsx)("b",{children:"Point Adjustment"})}),Object(J.jsx)("td",{children:n.addedPoints[a]||0})]}),Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{colSpan:"3",children:Object(J.jsx)("b",{children:"Total points:"})}),Object(J.jsx)("td",{children:((n.weekScores[a]||0)+(n.addedPoints[a]||0)).toFixed(2)})]})]})]})})]})},Re=function(e){var t=e.errors,n=e.handleFix;return Object(J.jsxs)(Q.a,{striped:!0,bordered:!0,hover:!0,className:"table-width",children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{children:"Player"}),Object(J.jsx)("th",{children:"Description"}),Object(J.jsx)("th",{children:"Fix"})]})}),Object(J.jsx)("tbody",{children:t.map((function(e,t){return Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:e.player.name}),Object(J.jsx)("td",{children:e.desc}),Object(J.jsx)("td",{children:Object(J.jsx)(L.a,{onClick:function(){return n(e,t)},children:"Fix Error"})})]},t)}))})]})},Ie=function(){var e=Object(y.g)().id,t=Object(a.useState)([]),n=Object(P.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(null),i=Object(P.a)(s,2),o=i[0],l=i[1],j=Object(a.useState)(!1),u=Object(P.a)(j,2),d=u[0],h=u[1],b=Object(a.useState)(1),O=Object(P.a)(b,2),m=O[0],f=O[1],p=Object(a.useState)([]),x=Object(P.a)(p,2),g=x[0],v=x[1],S=Object(a.useState)(!1),k=Object(P.a)(S,2),C=k[0],I=k[1],A=Object(a.useState)(!1),E=Object(P.a)(A,2),B=E[0],F=E[1],W=Object(a.useState)(!1),D=Object(P.a)(W,2),G=D[0],z=D[1],_=Object(a.useState)(""),H=Object(P.a)(_,2),q=H[0],K=H[1];Object(a.useEffect)((function(){var t=U.onAuthStateChanged(function(){var t=Object(N.a)(w.a.mark((function t(n){var a,c,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat("https://orca-ff.herokuapp.com","/api/v1/league/").concat(e,"/"),t.next=3,fetch(a);case 3:return c=t.sent,t.next=6,c.json();case 6:s=t.sent,console.log(s),r(s.teams),l(s.league.scoringSettings),console.log(s.league.lastScoredWeek+1||1),f(s.league.lastScoredWeek+1||1),h(s.league.commissioners.includes(n.uid));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return t()}}),[e]);var Q=function(){var e=Object(N.a)(w.a.mark((function e(t,n){var a,s,i,o,l,j,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="e"===e.t0?3:"b"===e.t0?6:24;break;case 3:return v((function(e){return e.splice(n,1),e})),F(!0),e.abrupt("break",25);case 6:return a=c.findIndex((function(e){return e.id===t.team.id})),s=t.team.players.findIndex((function(e){return e.name===t.player.name})),i=t.team.players.findIndex((function(e){return e.name===t.player.backup[m]})),c[a].players[i].lineup[m]=t.player.lineup[m],c[a].players[s].lineup[m]="bench",o={teams:c},l={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(o)},e.next=15,fetch("".concat("https://orca-ff.herokuapp.com","/api/v1/league/updateTeams"),l);case 15:return j=e.sent,e.next=18,j.json();case 18:return u=e.sent,r(u.teams),v((function(e){return e.splice(n,1),e})),K("Replaced ".concat(t.player.name," with ").concat(t.player.backup[m],". Rerun scores to finalize.")),z(!0),e.abrupt("break",25);case 24:F(!0);case 25:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return B?Object(J.jsx)(y.a,{to:"/league/".concat(e,"/editTeams/")}):Object(J.jsxs)(T.a,{className:"ml-5",children:[Object(J.jsx)(R.a,{children:Object(J.jsx)(Z,{id:e})}),Object(J.jsx)(ce,{week:m,maxWeeks:o&&o.maxWeeks,onChange:function(e){return f(parseInt(e.target.value))}}),c.length>0?c.map((function(e,t){return Object(J.jsx)(Te,{league:o,team:e,week:m},t)})):"",Object(J.jsx)(R.a,{children:Object(J.jsx)(Pe,{teams:c,week:m})}),d?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(R.a,{children:Object(J.jsx)(Re,{errors:g,handleFix:Q})}),Object(J.jsx)(R.a,{className:"mb-3",children:Object(J.jsx)(L.a,{variant:"success",onClick:function(){I(!0);var t="".concat("https://orca-ff.herokuapp.com","/api/v1/league/").concat(e,"/runScores/"),n={week:m},a={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)};fetch(t,a).then((function(e){return e.json()})).then((function(e){r(e.teams),v(e.errors),I(!1)}))},children:"Calculate Scores"})})]}):"",C?Object(J.jsx)("div",{className:"spinning-loader"}):"",Object(J.jsxs)(Ce.a,{show:G,onClose:function(){return z(!1)},className:"centered-popup",delay:7500,autohide:!0,children:[Object(J.jsx)(Ce.a.Header,{children:"Error resolution"}),Object(J.jsx)(Ce.a.Body,{children:q})]})]})},Ae=["QB","RB","WR","TE","K","WR/RB","WR/RB/TE","QB/WR/RB/TE"],Le=["ATT","PASS YD","REC YD","RUSH YD","CARRIES","YD PER CARRY","YD PER CATCH","REC","TARGETS","PASS TD","RUSH TD","REC TD","YD PER ATT","YD PER COMPLETION","CP%","INT","FUM","XPT","FG 1-19","FG 20-29","FG 30-39","FG 40-49","FG 50+","FG/XP MISS"];var Ee=function(){var e=Object(a.useState)([]),t=Object(P.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(P.a)(r,2),i=s[0],o=s[1],l=Object(y.g)().id;Object(a.useEffect)((function(){var e=U.onAuthStateChanged(function(){var e=Object(N.a)(w.a.mark((function e(t){var n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return n="".concat("https://orca-ff.herokuapp.com","/api/v1/league/").concat(l,"/"),e.next=4,fetch(n);case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,c(r.league.scoringSettings),r.league.commissioners.includes(t.uid)||o(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[l]);var j=function(e){var t=Object(k.a)(n);t[e.target.dataset.setting][e.target.name]=e.target.value,c(t)},u=function(e){var t=Object(k.a)(n);t[e.target.dataset.setting].category[e.target.name]=e.target.value,c(t)},d=function(e){var t=Object(k.a)(n);t[e.target.dataset.setting].minimums.splice(e.target.dataset.min,1),c(t)},h=function(e){var t=Object(k.a)(n);t[e.target.dataset.setting].minimums.push({statType:"ATT",threshold:0}),c(t)},b=function(e){var t=Object(k.a)(n);t[e.target.dataset.setting].minimums[e.target.dataset.min][e.target.name]=e.target.value,c(t)};return i?Object(J.jsx)(y.a,{to:"/league/".concat(l,"/")}):Object(J.jsxs)(T.a,{fluid:!0,children:[Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsx)(Z,{id:l})})}),Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsx)("h2",{className:"mb-5",children:"Scoring Settings"})})}),n?n.map((function(e,t){return Object(J.jsx)(fe.a,{placement:"top-start",delay:"1000",overlay:Object(J.jsx)(L.a,{onClick:function(){return function(e){var t=Object(k.a)(n);console.log(e),t.splice(e,1),console.log(n),console.log(t),c(t)}(t)},variant:"danger",size:"sm",className:"ml-2 mb-2",children:"Remove setting"}),children:Object(J.jsxs)(R.a,{className:"mt-3 mb-5",children:[Object(J.jsx)(H.a,{md:2,children:Object(J.jsx)(te.a.Control,{name:"position","data-setting":t,as:"select",defaultValue:e.position,onChange:j,children:Ae.map((function(e,t){return Object(J.jsx)("option",{value:e,children:e},t)}))})}),Object(J.jsxs)(H.a,{md:1,children:[Object(J.jsx)(te.a.Control,{name:"points","data-setting":t,value:e.points,onChange:j,type:"text"})," ","1"===e.points?"point":"points"]}),Object(J.jsxs)(H.a,{md:2,children:[Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsxs)(te.a.Control,{name:"qualifier","data-setting":t,as:"select",value:e.category.qualifier||"per",onChange:u,children:[Object(J.jsx)("option",{value:"per",children:"per"}),Object(J.jsx)("option",{value:"greater than",children:"greater than"}),Object(J.jsx)("option",{value:"between",children:"between"})]})})}),"between"===n[t].category.qualifier?Object(J.jsxs)(R.a,{children:[Object(J.jsx)(H.a,{children:Object(J.jsx)(te.a.Control,{name:"threshold_1","data-setting":t,value:e.category.threshold_1||"",onChange:u,type:"text"})}),"and",Object(J.jsx)(H.a,{children:Object(J.jsx)(te.a.Control,{name:"threshold_2","data-setting":t,value:e.category.threshold_2||"",onChange:u,type:"text"})})]}):Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsx)(te.a.Control,{name:"threshold","data-setting":t,value:e.category.threshold||"",onChange:u,type:"text"})})}),Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsx)(te.a.Control,{name:"statType","data-setting":t,as:"select",defaultValue:e.category.statType,onChange:u,children:Le.map((function(e,t){return Object(J.jsx)("option",{value:e,children:e},t)}))})})})]}),e.minimums.map((function(e,n){return Object(J.jsx)(fe.a,{placement:"bottom",delay:"1000",overlay:Object(J.jsx)(L.a,{"data-setting":t,size:"sm","data-min":n,variant:"danger",onClick:d,children:"Remove Minimum"}),children:Object(J.jsxs)(H.a,{md:2,children:[Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsx)("span",{children:"Minimum:"})})}),Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsx)(te.a.Control,{name:"threshold","data-setting":t,"data-min":n,value:e.threshold||"",onChange:b,type:"text"})})}),Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsx)(te.a.Control,{name:"statType","data-setting":t,"data-min":n,as:"select",defaultValue:e.statType,onChange:b,children:Le.map((function(e,t){return Object(J.jsx)("option",{value:e,children:e},t)}))})})})]},n)},t)})),Object(J.jsx)(H.a,{sm:2,children:Object(J.jsx)(L.a,{"data-setting":t,onClick:h,className:"mt-4",variant:"primary",children:"Add new minimum"})})]})},t)})):"",Object(J.jsx)(R.a,{className:"justify-content-center",children:Object(J.jsx)(H.a,{children:Object(J.jsx)(L.a,{variant:"primary",className:"mt-4",onClick:function(){var e=Object(k.a)(n);e.push({position:"QB",points:0,category:{qualifier:"per",threshold:0,statType:"PASS YD"},minimums:[]}),c(e)},children:"Add new setting"})})}),Object(J.jsx)(R.a,{className:"justify-content-center mt-4 mb-5",children:Object(J.jsx)(H.a,{children:Object(J.jsx)(L.a,{variant:"success",onClick:function(){var e={id:l,settings:n},t="".concat("https://orca-ff.herokuapp.com","/api/v1/league/").concat(l,"/updateScoringSettings/"),a={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)};fetch(t,a).then((function(e){return e.json()})).then((function(e){console.log(e),o(!0)}))},children:"Submit"})})})]})};function Be(){var e=Object(y.g)().id,t=oe(e),n=t.league,c=t.teams,r=Object(a.useState)([]),s=Object(P.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(n.lastScoredWeek),j=Object(P.a)(l,2),u=j[0],d=j[1],h=Object(a.useState)(!1),b=Object(P.a)(h,2),O=b[0],m=b[1],f=U.currentUser;console.log(c),Object(a.useEffect)((function(){c.length&&o(c)}),[c]);var p=function(e){var t=Object(k.a)(i);t[e.target.dataset.id].addedPoints[u]=Number.parseFloat(e.target.value),o(t)};return i.length>0&&!n.commissioners.includes(f.uid)||O?Object(J.jsx)(y.a,{to:"/league/".concat(e,"/")}):Object(J.jsxs)(T.a,{id:"small-left",children:[Object(J.jsx)(R.a,{children:Object(J.jsx)(Z,{id:e})}),Object(J.jsxs)(R.a,{className:"mt-3 mb-3",children:[Object(J.jsx)(H.a,{className:"justify-items-center align-self-center",md:1,children:Object(J.jsx)(te.a.Label,{children:"Week: "})}),Object(J.jsx)(H.a,{md:1,children:Object(J.jsx)(te.a.Control,{as:"select",defaultValue:u,onChange:function(e){return d(e.target.value)},children:Object(k.a)(Array(n&&n.numWeeks||18)).map((function(e,t){return Object(J.jsx)("option",{value:t+1,children:t+1},t)}))})})]}),Object(J.jsxs)(Q.a,{bordered:!0,children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{children:"Team Name"}),Object(J.jsx)("th",{children:"Points in Week"}),Object(J.jsx)("th",{children:"Points to Add"})]})}),Object(J.jsx)("tbody",{children:i?i.map((function(e,t){return 0===e.addedPoints.length&&(e.addedPoints=Object(k.a)(Array(17)).fill(0)),Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:e.name}),Object(J.jsx)("td",{children:e.weekScores[u]||0}),Object(J.jsx)("td",{children:Object(J.jsx)(te.a.Control,{value:e.addedPoints[u]||0,"data-id":t,onChange:p,type:"text"})})]},t)})):""})]}),Object(J.jsx)(L.a,{variant:"success",className:"mt-5 mb-5",onClick:function(){var e={teams:i},t="".concat("https://orca-ff.herokuapp.com","/api/v1/league/adjustTeamSettings/"),n={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)};fetch(t,n),m(!0)},children:"Submit"})]})}function Fe(){var e=Object(y.g)().id,t=oe(e),n=t.league,c=t.teams,r=Object(a.useState)([]),s=Object(P.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(!1),j=Object(P.a)(l,2),u=j[0],d=j[1],h=Object(a.useState)(1),b=Object(P.a)(h,2),O=b[0],m=b[1],f=U.currentUser;Object(a.useEffect)((function(){var e=U.onAuthStateChanged((function(){n&&(m(n.lastWeekScored||1),o(c))}));return function(){return e()}}),[n,c]);var p=function(e,t,n){"starters"===t?(n.lineup[O]=e.lineup[O],e.lineup[O]="bench"):"backup"===t?"none"===n.name?e.backup[O]=null:e.backup[O]=n.name:(e.lineup[O]=n.lineup[O],""!==n.name&&(n.lineup[O]="bench")),o(Object(k.a)(i))},x=function(e){var t=Object(k.a)(i);e.lineup[O]="bench",o(t)};return i&&i.length&&!n.commissioners.includes(f.uid)?Object(J.jsx)(y.a,{to:"/league/".concat(e,"/")}):Object(J.jsxs)(T.a,{id:"small-left",children:[Object(J.jsx)(Z,{id:e}),Object(J.jsx)(ce,{week:O,onChange:function(e){return m(parseInt(e.target.value))}}),i?i.map((function(e,t){var a=Object.keys(n&&n.lineupSettings).sort(ie).map((function(e){return Object(k.a)(Array(parseInt(n&&n.lineupSettings[e])).fill().map((function(){return{position:e,name:"",lineup:Object(k.a)(Array(17).fill(e))}})))})).flat();e.players.filter((function(e){return"bench"!==e.lineup[O]})).forEach((function(e){a[a.findIndex((function(t){return t.lineup[O]===e.lineup[O]&&""===t.name}))]=e}));var c=e.players.filter((function(e){return"bench"===e.lineup[O]}));return Object(J.jsxs)(R.a,{children:[Object(J.jsx)(H.a,{xs:12,children:Object(J.jsx)("h2",{children:e.name})}),Object(J.jsx)(H.a,{xs:12,children:Object(J.jsx)("h4",{children:"Starters"})}),Object(J.jsxs)(H.a,{children:[Object(J.jsx)(X,{players:a,week:O,oppPlayers:c,name:"starters",handleBenchPlayer:x,handlePlayerChange:p,isOwner:!0}),Object(J.jsx)("div",{children:Object(J.jsx)("h4",{children:"Bench"})}),Object(J.jsx)(X,{players:c,week:O,oppPlayers:a,name:"bench",handleBenchPlayer:x,handlePlayerChange:p,isOwner:!0})]})]},t)})):"",Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsx)(L.a,{variant:"success",className:"mt-3 mb-4",onClick:function(){var e,t=Object(k.a)(i),n=Object(C.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.players=a.players.filter((function(e){return""!==e.name}))}}catch(o){n.e(o)}finally{n.f()}var c="".concat("https://orca-ff.herokuapp.com","/api/v1/league/updateTeams/"),r={teams:t},s={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(r)};fetch(c,s).then((function(e){return e.json()})).then((function(){d(!0),setTimeout((function(){return d(!1)}),8e3)}))},children:"Submit Lineups"})})}),u?Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{sm:5,children:Object(J.jsxs)(K.a,{className:"mb-3",variant:"success",children:["Submitted lineups! ",Object(J.jsx)("a",{href:"/league/".concat(e,"/"),children:"Back to home"})]})})}):""]})}var We=function(e){return Object(J.jsxs)($.a,{show:e.changePassword,onHide:e.handleHide,children:[Object(J.jsx)($.a.Header,{children:Object(J.jsxs)($.a.Title,{children:["Change Password",Object(J.jsx)("div",{className:"subtitle",children:"If you used Google to sign in, this option will do nothing."}),Object(J.jsx)("div",{className:"subtitle",children:"Password must be at least six characters."})]})}),Object(J.jsxs)(ee.a,{children:[Object(J.jsxs)(te.a.Group,{as:R.a,children:[Object(J.jsx)(te.a.Label,{column:!0,children:"Old Password:"}),Object(J.jsx)(H.a,{children:Object(J.jsx)(te.a.Control,{type:"password",onChange:function(t){return e.setOldPassword(t.target.value)}})})]}),Object(J.jsxs)(te.a.Group,{as:R.a,children:[Object(J.jsx)(te.a.Label,{column:!0,children:"New Password:"}),Object(J.jsx)(H.a,{children:Object(J.jsx)(te.a.Control,{type:"password",onChange:function(t){return e.handlePasswordChange(t,"First")}})})]}),Object(J.jsxs)(te.a.Group,{as:R.a,children:[Object(J.jsx)(te.a.Label,{column:!0,children:"Retype New Password:"}),Object(J.jsx)(H.a,{children:Object(J.jsx)(te.a.Control,{type:"password",onChange:function(t){return e.handlePasswordChange(t,"Second")}})})]}),e.unmatched?Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsx)(K.a,{variant:"danger",children:"New passwords must match exactly."})})}):"",e.incorrectPassword?Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsx)(K.a,{variant:"danger",children:"Incorrect previous password entered."})})}):"",e.success?Object(J.jsx)(R.a,{children:Object(J.jsx)(H.a,{children:Object(J.jsx)(K.a,{variant:"success",children:"Successfully updated password!"})})}):""]}),Object(J.jsx)($.a.Footer,{children:Object(J.jsx)(L.a,{disabled:e.unmatched,variant:"success",onClick:function(){return e.handlePasswordSubmission},children:"Submit New Password"})})]})},Ue=function(e,t){switch(t.type){case"changePassword":return Object(_.a)(Object(_.a)({},e),{},{changePassword:!e.changePassword});case"setOldPassword":return Object(_.a)(Object(_.a)({},e),{},{oldPassword:t.password});case"setFirstNewPassword":return Object(_.a)(Object(_.a)({},e),{},{unmatched:t.unmatched,firstNewPassword:t.password});case"setSecondNewPassword":return Object(_.a)(Object(_.a)({},e),{},{unmatched:t.unmatched,secondNewPassword:t.password});case"setFlags":return Object(_.a)(Object(_.a)({},e),{},{unmatched:t.unmatched&&!0,incorrect:t.incorrect||!1,success:t.success||!1,changePassword:t.changePassword});case"reset":return t.initState;default:return Object(_.a)({},e)}},De=function(){var e=Object(y.g)().userid,t={oldPassword:"",firstNewPassword:"",secondNewPassword:"",unmatched:!0,incorrectPassword:!1,success:!1,changePassword:!1},n=Object(a.useReducer)(Ue,t),c=Object(P.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)([]),o=Object(P.a)(i,2),l=o[0],j=o[1],u=Object(a.useState)(!1),d=Object(P.a)(u,2),h=d[0],b=d[1],O=Object(a.useState)(null),m=Object(P.a)(O,2),f=m[0],p=m[1],x=U.currentUser;Object(a.useEffect)((function(){var t=U.onAuthStateChanged((function(t){if(t){var n="".concat("https://orca-ff.herokuapp.com","/api/v1/user/").concat(e,"/leagues/");fetch(n).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){j(e.teams),e.url&&!f&&p(e.url);var t,n=Object(C.a)(e.teams.entries());try{var a=function(){var e=Object(P.a)(t.value,2),n=e[0],a=e[1];a.leagueLogo&&W.ref("logos/".concat(a.leagueLogo)).getDownloadURL().then((function(e){j((function(t){var a=Object(k.a)(t);return a[n].logoUrl=e,console.log(a),a}))}))};for(n.s();!(t=n.n()).done;)a()}catch(c){n.e(c)}finally{n.f()}})).catch((function(e){console.log(e)}))}}));return function(){return t()}}),[e,f]);return console.log(x),Object(J.jsxs)(T.a,{fluid:!0,children:[x?Object(J.jsx)(J.Fragment,{children:Object(J.jsxs)(R.a,{className:"justify-content-center mb-3 mt-3",children:[Object(J.jsx)(H.a,{sm:"auto",children:Object(J.jsx)(q.a,{src:f||"".concat("https://orca-ff.herokuapp.com","/football.jfif"),className:"image-fit-height mr-3",roundedCir:!0})}),Object(J.jsxs)(H.a,{sm:"auto",children:[Object(J.jsx)(R.a,{children:Object(J.jsx)("h1",{className:"mt-3",children:x.displayName})}),Object(J.jsx)(R.a,{children:Object(J.jsx)("div",{className:"subtitle",children:x.email})})]})]})}):"",x&&e===x.uid?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(R.a,{className:"justify-content-center mb-3",children:Object(J.jsx)(L.a,{onClick:function(){return s({type:"changePassword"})},children:"Change Password"})}),Object(J.jsx)(R.a,{className:"justify-content-center mb-3",children:Object(J.jsx)(L.a,{onClick:function(){return b(!0)},children:"Change/Set User Image"})})]}):"",x?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(We,{changePassword:r.changePassword,unmatched:r.unmatched,incorrectPassword:r.incorrect,success:r.success,handlePasswordChange:function(e,t){var n=("First"===t?e.target.value!==r.secondNewPassword:e.target.value!==r.firstNewPassword)||""===e.target.value,a={type:"set".concat(t,"NewPassword"),password:e.target.value,unmatched:n};s(a)},setOldPassword:function(e){return s({type:"setOldPassword",password:e})},handlePasswordSubmission:function(){var e=G.auth.EmailAuthProvider.credential(x.email,r.oldPassword),n={type:"setFlags",success:!1,incorrectPassword:!0,changePassword:!0};x.reauthenticateWithCredential(e).then((function(){x.updatePassword(r.firstNewPassword).then((function(){s({type:"setFlags",success:!0,incorrect:!1,changePassword:!0}),setTimeout((function(){s({type:"reset",initState:t})}),2500)})).catch((function(e){console.log(e),s(n)}))})).catch((function(e){console.log(e),s(n)}))},handleHide:function(){return s({type:"changePassword"})}}),Object(J.jsx)(ae,{showImage:h,handleHide:function(){return b(!h)},handleImageSubmission:function(t){var n=U.currentUser;W.ref().child("".concat(n.email,"/logo")).putString(t,"data_url").then((function(t){t.ref.getDownloadURL().then((function(t){n.updateProfile({photoURL:t}).then((function(){b(!1);var n="".concat("https://orca-ff.herokuapp.com","/api/v1/user/").concat(e,"/updatePhoto/"),a={url:t},c={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a)};fetch(n,c).then((function(){p(t)}))}))}))}))}})]}):"",Object(J.jsx)(R.a,{className:"justify-content-center",children:Object(J.jsx)(I.a,{id:"teamCards",children:l.map((function(e,t){return Object(J.jsxs)(A.a,{className:"m-2",children:[Object(J.jsxs)(A.a.Body,{className:"d-flex flex-column align-content-end",children:[Object(J.jsx)("a",{href:"/league/".concat(e.league,"/team/").concat(e.id,"/"),children:Object(J.jsx)(A.a.Img,{variant:"bottom",className:"mt-auto",src:e.logoUrl?e.logoUrl:e.logo})}),Object(J.jsxs)("div",{className:"mt-auto",children:[Object(J.jsx)(A.a.Title,{children:e.name}),Object(J.jsx)(A.a.Text,{children:e.leagueName}),Object(J.jsx)(L.a,{className:"mt-auto",href:"/league/".concat(e.league,"/"),children:"Go to league"})]})]}),e.isCommissioner?Object(J.jsx)(A.a.Footer,{children:"Commissioner"}):""]},t)}))})})]})},Ge=n(131),Je=["component"],ze=function(e){var t=e.component,n=Object(Ge.a)(e,Je);return Object(s.c)(h)?Object(J.jsx)(y.b,Object(_.a)(Object(_.a)({},n),{},{component:function(e){return Object(J.jsx)(t,Object(_.a)(Object(_.a)({},n),e))}})):Object(J.jsx)(y.a,{to:"/login/"})};var _e=function(){var e=Object(y.g)().id,t=oe(e),n=t.league,c=t.teams,r=Object(a.useState)(0),s=Object(P.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)([]),j=Object(P.a)(l,2),u=j[0],d=j[1],h=Object(a.useState)([]),b=Object(P.a)(h,2),O=b[0],m=b[1],f=Object(a.useState)(!1),p=Object(P.a)(f,2),x=p[0],g=p[1],v=Object(a.useState)(!1),S=Object(P.a)(v,2),C=S[0],I=S[1],A=Object(a.useState)(""),E=Object(P.a)(A,2),B=E[0],F=E[1],D=Object(a.useState)({}),G=Object(P.a)(D,2),z=G[0],K=G[1],Q=Object(a.useState)(0),V=Object(P.a)(Q,2),Y=V[0],M=V[1],X=Object(a.useState)(!1),Z=Object(P.a)(X,2),$=Z[0],ee=Z[1],ae=Object(a.useState)("".concat("/orca.jfif")),ce=Object(P.a)(ae,2),re=ce[0],se=ce[1];Object(a.useEffect)((function(){var e=U.onAuthStateChanged((function(e){n&&(g(!n.commissioners.includes(e.uid)),console.log("running useEffect"),u.length||(d(c),o(c.length)),"/orca.jfif"!==n.logo&&W.ref("logos/".concat(n.logo)).getDownloadURL().then((function(e){se(e)})),F(n.name),M(n.numWeeks),K(n.lineupSettings))}));return function(){return e()}}),[n,c]);var ie=Object(a.useCallback)((function(e){var t=new FileReader;t.onload=function(e){se(e.target.result),ee(!0)},t.readAsDataURL(e[0])}),[]),le=Object(ne.a)({onDrop:ie}),je=le.getRootProps,ue=le.getInputProps;function de(){return(de=Object(N.a)(w.a.mark((function t(){var a,c,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(I(!0),a=Object(Oe.a)(),c=W.ref().child("logos/".concat(a)),"/orca.jfif"===re||!$){t.next=7;break}c.putString(re,"data_url").then(Object(N.a)(w.a.mark((function t(){var c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={league:Object(_.a)(Object(_.a)({},n),{},{lineupSettings:z,numWeeks:Y,name:B,logo:a}),teams:u,deletedTeams:O},t.next=3,fetch("".concat("https://orca-ff.herokuapp.com","/api/v1/league/").concat(e,"/update/"),{method:"POST",body:JSON.stringify(c),headers:{"content-type":"application/json"}});case 3:g(!0),I(!1);case 5:case"end":return t.stop()}}),t)})))).catch((function(e){console.log(e)})),t.next=12;break;case 7:return r={league:Object(_.a)(Object(_.a)({},n),{},{lineupSettings:z,numWeeks:Y,name:B,logo:n.logo||"/orca.jfif",commissioners:u.filter((function(e){return"default"!==e.owner&&e.isCommissioner})).map((function(e){return e.owner}))}),teams:u,deletedTeams:O},t.next=10,fetch("".concat("https://orca-ff.herokuapp.com","/api/v1/league/").concat(e,"/update/"),{method:"POST",body:JSON.stringify(r),headers:{"content-type":"application/json"}});case 10:g(!0),I(!1);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return x?Object(J.jsx)(y.a,{to:"/league/".concat(e,"/")}):Object(J.jsxs)(T.a,{children:[Object(J.jsxs)(te.a,{children:[Object(J.jsx)(xe,{handleSizeChange:function(e){M(parseInt(e,10))},setLeagueName:F,numTeams:i,allowTeamSizeChanges:!1,numWeeks:Y,leagueName:B}),Object(J.jsx)(pe,{handleOverlay:function(e){var t=Object(k.a)(u),n=Object(k.a)(O),a=t.splice(e,1);n.push(a[0]),m(n),d(t)},teams:u,handleChange:function(e){var t=Object(k.a)(u);"isCommissioner"===e.target.name?t[e.target.dataset.id][e.target.name]=!t[e.target.dataset.id][e.target.name]:t[e.target.dataset.id][e.target.name]=e.target.value,d(t)}}),Object(J.jsx)(R.a,{className:"mb-5",children:Object(J.jsx)(H.a,{children:Object(J.jsx)(L.a,{onClick:function(){var e=Object(k.a)(u);e.push({name:"Team ".concat((e.length+1).toString()),teamOwner:"default",isCommissioner:!1}),d(e)},children:"Add Team"})})}),Object(J.jsx)(me,{handleChange:function(e){var t=Object(_.a)({},z);t[e.target.name]=e.target.value,console.log(t),K(t)},positionSettings:z}),Object(J.jsx)("hr",{}),Object(J.jsx)("h4",{children:"League Logo"}),Object(J.jsx)(R.a,{className:"mb-3",children:Object(J.jsx)(H.a,{children:Object(J.jsxs)("div",Object(_.a)(Object(_.a)({},je({className:"dropzone"})),{},{children:[Object(J.jsx)("input",Object(_.a)({},ue())),"Select or drop image here"]}))})}),Object(J.jsx)(R.a,{children:Object(J.jsx)(q.a,{className:"image-fit",src:re})}),Object(J.jsx)(te.a.Row,{className:"mb-3 mt-3",children:Object(J.jsx)(L.a,{variant:"success",onClick:function(){return function(){return de.apply(this,arguments)}()},children:"Submit Updates"})})]}),C?Object(J.jsx)("div",{className:"spinning-loader"}):""]})},He=(n(179),n(195)),qe=n(127),Ke=function(){var e=Object(a.useState)(null),t=Object(P.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(P.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(null),j=Object(P.a)(l,2),u=j[0],d=j[1],h=Object(a.useState)([]),b=Object(P.a)(h,2),O=b[0],m=b[1],f=Object(a.useState)(null),p=Object(P.a)(f,2),x=p[0],g=p[1];Object(a.useEffect)((function(){var e=U.onAuthStateChanged(function(){var e=Object(N.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(t.email);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]);var v=function(){var e=Object(N.a)(w.a.mark((function e(){var t,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://orca-ff.herokuapp.com","/api/v1/league/find/").concat(n,"/"),e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,Promise.all(Object.entries(c).map(function(){var e=Object(N.a)(w.a.mark((function e(t){var n,a,c,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(P.a)(t,2),a=n[0],"/orca.jfif"===(c=n[1]).logo){e.next=6;break}return e.next=4,W.ref("logos/".concat(c.logo)).getDownloadURL();case 4:r=e.sent,c.logoUrl=r;case 6:return c.id=a,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return m(e)}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i?Object(J.jsx)(y.a,{to:u}):Object(J.jsxs)(T.a,{children:[Object(J.jsx)(R.a,{className:"mt-4",children:Object(J.jsx)(H.a,{className:"justify-content-center",children:Object(J.jsxs)(He.a,{children:[Object(J.jsx)(qe.a,{placeholder:"Search for league",value:n||"",onChange:function(e){return c(e.target.value)}}),Object(J.jsx)(L.a,{onClick:v,children:"Submit"})]})})}),Object(J.jsx)(R.a,{className:"mt-5",children:Object(J.jsx)(H.a,{children:Object(J.jsx)(I.a,{children:O.map((function(e){return Object(J.jsxs)(A.a,{children:[Object(J.jsx)(A.a.Img,{variant:"top",src:e.logoUrl||"/orca.jfif"}),Object(J.jsx)(A.a.Title,{children:e.name}),Object(J.jsx)(A.a.Body,{children:Object(J.jsx)(L.a,{onClick:function(){return function(e){var t="".concat("https://orca-ff.herokuapp.com","/api/v1/league/").concat(e,"/join/"),n={owner:x},a={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)};fetch(t,a).then((function(e){return e.json()})).then((function(e){d(e.url),o(!0)})).catch((function(e){return console.log(e)}))}(e.id)},children:"Join League"})})]},e.name)}))})})})]})},Qe=function(){return Object(J.jsxs)(v.a,{children:[Object(J.jsx)(he,{}),Object(J.jsxs)(y.d,{children:[Object(J.jsx)(y.b,{path:"/league/create/",component:ve}),Object(J.jsx)(y.b,{path:"/league/join/",component:Ke}),Object(J.jsx)(ze,{path:"/league/:leagueId/team/:id/",component:le}),Object(J.jsx)(y.b,{path:"/league/:id/editTeams/",component:ke}),Object(J.jsx)(y.b,{path:"/league/:id/editScoringSettings/",component:Ee}),Object(J.jsx)(ze,{path:"/league/:id/updateSettings/",component:_e}),Object(J.jsx)(y.b,{path:"/league/:id/runScores/",component:Ie}),Object(J.jsx)(y.b,{path:"/league/:id/addPoints/",component:Be}),Object(J.jsx)(y.b,{path:"/league/:id/adjustLineups/",component:Fe}),Object(J.jsx)(ze,{path:"/league/:id/",component:Se}),Object(J.jsx)(ze,{path:"/user/:userid/",component:De}),Object(J.jsx)(y.b,{path:"/login/",component:be}),Object(J.jsx)(ze,{path:"/",component:z})]})]})},Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,204)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},Ye=Object(i.h)(g);r.a.render(Object(J.jsx)(s.a,{store:g,children:Object(J.jsx)(o.a,{persistor:Ye,children:Object(J.jsx)(Qe,{})})}),document.getElementById("root")),Ve()},50:function(e,t,n){}},[[180,1,2]]]);
//# sourceMappingURL=main.80c88f47.chunk.js.map